<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no, viewport-fit=cover">
    <meta http-equiv="Content-Security-Policy" content="default-src 'self' data: https://ssl.gstatic.com https://fonts.googleapis.com https://fonts.gstatic.com https://images.unsplash.com https://picsum.photos https://source.unsplash.com 'unsafe-eval' 'unsafe-inline'; style-src 'self' 'unsafe-inline' https://fonts.googleapis.com; media-src *; img-src 'self' data: content: https: http:; font-src 'self' https://fonts.gstatic.com data:;">
    <title>我要喝水 - 喝水打卡</title>

    <!-- PWA Support -->
    <link rel="manifest" href="manifest.json">

    <!-- iOS Meta Tags -->
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="apple-mobile-web-app-title" content="我要喝水">

    <!-- iOS Icons -->
    <link rel="apple-touch-icon" href="img/icon-192.png">
    <link rel="apple-touch-icon" sizes="152x152" href="img/icon-192.png">
    <link rel="apple-touch-icon" sizes="180x180" href="img/icon-192.png">
    <link rel="apple-touch-icon" sizes="167x167" href="img/icon-192.png">

    <!-- Splash Screen -->
    <meta name="apple-mobile-web-app-capable" content="yes">

    <!-- Theme Color -->
    <meta name="theme-color" content="#667eea">

    <!-- Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Quicksand:wght@300;400;500;600;700&display=swap" rel="stylesheet">

    <!-- Stylesheet -->
    <link rel="stylesheet" type="text/css" href="css/index.css">
</head>
<body>
    <!-- Animated background elements -->
    <div class="bg-gradient"></div>
    <div class="glass-orb orb-1"></div>
    <div class="glass-orb orb-2"></div>
    <div class="glass-orb orb-3"></div>

    <div class="app">
        <!-- 头部区域 -->
        <header class="header">
            <button class="settings-btn" id="settingsBtn">
                <span>⚙️</span>
            </button>
            <h1>💧 我要喝水</h1>
            <p class="subtitle">
                光联万物，光感万业；<br>
                喝水打卡，健康追光！
            </p>
        </header>

        <!-- 进度区域 -->
        <div class="progress-container">
            <!-- 圆形进度条 -->
            <div class="circular-progress">
                <svg class="progress-ring" width="200" height="200">
                    <circle class="progress-ring-circle-bg" cx="100" cy="100" r="85" />
                    <circle class="progress-ring-circle" cx="100" cy="100" r="85" id="progressCircle" />
                </svg>
                <div class="progress-content">
                    <div class="progress-amount">
                        <span id="currentAmount">0</span>
                        <span class="unit">ml</span>
                    </div>
                    <div class="progress-target">/ <span id="goalTarget">2000</span>ml</div>
                    <div class="progress-percentage" id="progressPercentage">0%</div>
                </div>
            </div>

            <!-- 统计信息 -->
            <div class="stats-row">
                <div class="stat-item">
                    <div class="stat-icon">🎯</div>
                    <div class="stat-info">
                        <div class="stat-value"><span id="goalDisplay">2000</span>ml</div>
                        <div class="stat-label">今日目标</div>
                    </div>
                </div>
                <div class="stat-item">
                    <div class="stat-icon">💧</div>
                    <div class="stat-info">
                        <div class="stat-value" id="todayCount">0</div>
                        <div class="stat-label">今日打卡</div>
                    </div>
                </div>
                <div class="stat-item">
                    <div class="stat-icon">🏆</div>
                    <div class="stat-info">
                        <div class="stat-value" id="remainAmount">2000ml</div>
                        <div class="stat-label">还需饮用</div>
                    </div>
                </div>
            </div>

            <!-- 累计统计 -->
            <div class="total-stats">
                <div class="total-item">
                    <span class="total-label">📊 累计总打卡</span>
                    <span class="total-value" id="totalCount">0</span>
                    <span class="total-unit">次</span>
                </div>
                <div class="total-item">
                    <span class="total-label">📅 连续打卡</span>
                    <span class="total-value" id="streakDays">0</span>
                    <span class="total-unit">天</span>
                </div>
            </div>
        </div>

        <!-- 快捷打卡按钮组 -->
        <div class="quick-buttons">
            <h3 class="section-title">👇 点击下方按钮打卡</h3>
            <div class="button-group">
                <button class="amount-button" data-amount="100">
                    <div class="button-amount">+100ml</div>
                    <div class="button-desc">小杯</div>
                </button>
                <button class="amount-button primary" data-amount="200">
                    <div class="button-amount">+200ml</div>
                    <div class="button-desc">中杯</div>
                </button>
                <button class="amount-button" data-amount="300">
                    <div class="button-amount">+300ml</div>
                    <div class="button-desc">大杯</div>
                </button>
            </div>
        </div>

        <!-- 记录列表 -->
        <div class="records-container">
            <h3 class="section-title">📝 今日记录</h3>
            <div id="recordsList" class="records-list">
                <div class="empty-state">
                    <div class="empty-icon">💧</div>
                    <p>还没有喝水记录</p>
                    <p class="empty-hint">选择饮水量开始打卡吧！</p>
                </div>
            </div>
        </div>
    </div>

    <!-- 设置弹窗 -->
    <div class="settings-modal" id="settingsModal">
        <div class="settings-overlay" id="settingsOverlay"></div>
        <div class="settings-panel">
            <div class="settings-header">
                <h2>⚙️ 设置</h2>
                <button class="close-btn" id="closeSettingsBtn">✕</button>
            </div>
            <div class="settings-content">
                <!-- 智能提醒设置 -->
                <div class="settings-section">
                    <h3 class="settings-section-title">⏰ 智能提醒</h3>
                    <div class="setting-item">
                        <div class="setting-info">
                            <span class="setting-label">开启提醒</span>
                            <span class="setting-desc">根据喝水进度智能提醒</span>
                        </div>
                        <label class="switch">
                            <input type="checkbox" id="reminderToggle">
                            <span class="slider"></span>
                        </label>
                    </div>
                    <div class="reminder-time-settings" id="reminderTimeSettings" style="display: none;">
                        <div class="setting-item">
                            <span class="setting-label">开始时间</span>
                            <input type="time" id="reminderStartTime" value="08:00" class="time-input">
                        </div>
                        <div class="setting-item">
                            <span class="setting-label">结束时间</span>
                            <input type="time" id="reminderEndTime" value="20:00" class="time-input">
                        </div>
                        <div class="reminder-info">
                            💡 系统会根据您的喝水进度智能提醒
                        </div>
                    </div>
                </div>

                <!-- 其他设置 -->
                <div class="settings-section">
                    <h3 class="settings-section-title">📊 其他设置</h3>
                    <div class="setting-item">
                        <div class="setting-info">
                            <span class="setting-label">每日目标</span>
                            <span class="setting-desc">设置每天的喝水目标</span>
                        </div>
                        <div class="goal-input-wrapper">
                            <input type="number" id="dailyGoalInput" min="500" max="5000" step="100" value="2000" class="goal-input">
                            <span class="goal-unit">ml</span>
                        </div>
                    </div>
                </div>

                <!-- 打卡日历 -->
                <div class="settings-section">
                    <h3 class="settings-section-title">📅 打卡日历</h3>
                    <div class="calendar-header">
                        <button class="calendar-nav-btn" id="prevMonth">‹</button>
                        <span class="calendar-month" id="calendarMonth">2024年1月</span>
                        <button class="calendar-nav-btn" id="nextMonth">›</button>
                    </div>
                    <div class="calendar-weekdays">
                        <div class="weekday">日</div>
                        <div class="weekday">一</div>
                        <div class="weekday">二</div>
                        <div class="weekday">三</div>
                        <div class="weekday">四</div>
                        <div class="weekday">五</div>
                        <div class="weekday">六</div>
                    </div>
                    <div class="calendar-days" id="calendarDays">
                        <!-- 日期将通过JavaScript动态生成 -->
                    </div>
                    <div class="calendar-legend">
                        <div class="legend-item">
                            <span class="legend-dot checked"></span>
                            <span class="legend-text">已打卡</span>
                        </div>
                        <div class="legend-item">
                            <span class="legend-dot today"></span>
                            <span class="legend-text">今天</span>
                        </div>
                    </div>
                </div>

                <!-- 数据管理 -->
                <div class="settings-section">
                    <h3 class="settings-section-title">🗑️ 数据管理</h3>
                    <div class="setting-item">
                        <div class="setting-info">
                            <span class="setting-label">清除所有数据</span>
                            <span class="setting-desc">删除所有打卡记录（不可恢复）</span>
                        </div>
                        <button class="clear-data-btn" id="clearDataBtn">清除数据</button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- 确认对话框 -->
    <div class="confirm-modal" id="confirmModal">
        <div class="confirm-overlay"></div>
        <div class="confirm-dialog">
            <div class="confirm-icon">⚠️</div>
            <h3 class="confirm-title">确认清除数据？</h3>
            <p class="confirm-message">此操作将删除所有打卡记录，包括历史数据和统计信息。此操作不可恢复！</p>
            <div class="confirm-buttons">
                <button class="confirm-btn cancel" id="confirmCancelBtn">取消</button>
                <button class="confirm-btn confirm" id="confirmOkBtn">确认清除</button>
            </div>
        </div>
    </div>

    <script type="text/javascript" src="cordova.js"></script>
    <script type="text/javascript" src="js/index.js"></script>
</body>
</html>
